
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Honeywell Incident Reporting – Quick Links</title>
  <style>
    :root {
      --brand-red: #e31e24;
      --text: #1a1a1a;
      --muted: #666;
      --bg: #f7f7f8;
      --card: #ffffff;
      --border: #ddd;
    }
    * { box-sizing: border-box; }
    body { font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif; margin: 0; background: var(--bg); color: var(--text); }
    header { background: var(--card); border-bottom: 1px solid var(--border); padding: 16px 20px; }
    header h1 { margin: 0; font-size: 1.2rem; font-weight: 700; }
    header .subtitle { font-size: .9rem; color: var(--muted); }
    main { max-width: 960px; margin: 24px auto; padding: 0 16px; }
    .card { background: var(--card); border: 1px solid var(--border); border-radius: 12px; padding: 16px; box-shadow: 0 1px 2px rgba(0,0,0,0.04); }
    .row { display: grid; grid-template-columns: 1fr; gap: 16px; }
    @media (min-width: 800px) { .row { grid-template-columns: 1fr 1fr; } }
    label { font-weight: 600; display: block; margin-bottom: 8px; }
    select, input[type="search"] { width: 100%; padding: 10px 12px; border: 1px solid var(--border); border-radius: 8px; font-size: 1rem; }
    .section-title { font-size: 1.1rem; font-weight: 700; margin: 0 0 8px; }
    .hint { color: var(--muted); font-size: .9rem; }
    .panel { margin-top: 12px; padding: 12px; border: 1px dashed var(--border); border-radius: 8px; background: #fff; }
    .qr { width: 140px; height: 140px; border: 1px solid var(--border); border-radius: 8px; display: grid; place-items: center; overflow: hidden; background: #fafafa; }
    .qr img { width: 100%; height: 100%; object-fit: cover; }
    .contacts { white-space: pre-wrap; }
    .brand { color: var(--brand-red); font-weight: 800; }
    .footer { color: var(--muted); font-size: .85rem; text-align: center; margin: 24px 0 40px; }
    .badge { display: inline-block; background: #f2f2f2; color: #333; border: 1px solid var(--border); border-radius: 999px; padding: 2px 8px; font-size: .8rem; margin-left: 8px; }
    .copy { margin-top: 8px; }
    button.copy-btn { padding: 8px 10px; border: 1px solid var(--border); border-radius: 8px; background: #fff; cursor: pointer; }
    button.copy-btn:hover { background: #f6f6f6; }
  </style>
</head>
<body>
  <header>
    <h1><span class="brand">Honeywell</span> Incident Reporting</h1>
    <div class="subtitle">All-in-one page for QR codes, nurse triage and contingent labor HSE contacts.</div>
  </header>
  <main>
    <div class="card">
      <label for="category">Select category</label>
      <select id="category" aria-label="Select reporting category">
        <option value="us">Honeywell US</option>
        <option value="canada">Honeywell Canada</option>
        <option value="contingent">Contingent Labor Providers</option>
      </select>

      <div id="us-panel" class="panel" hidden>
        <div class="section-title">Honeywell Employees – US <span class="badge">Care On Site</span></div>
        <div class="row">
          <div>
            <div class="hint">Scan QR or call immediately</div>
            <div class="qr" id="us-qr"><span>No QR set</span></div>
          </div>
          <div>
            <div class="contacts">
              <strong>Phone:</strong> <span id="us-phone"></span>
              <br/>
              <strong>Important:</strong> <span id="us-note"></span>
            </div>
          </div>
        </div>
      </div>

      <div id="ca-panel" class="panel" hidden>
        <div class="section-title">Honeywell Employees – Canada <span class="badge">Windley Ely Nurse Triage</span></div>
        <div class="row">
          <div>
            <div class="hint">Scan QR or call immediately</div>
            <div class="qr" id="ca-qr"><span>No QR set</span></div>
          </div>
          <div>
            <div class="contacts">
              <strong>Phone:</strong> <span id="ca-phone"></span>
              <br/>
              <strong>Important:</strong> <span id="ca-note"></span>
            </div>
          </div>
        </div>
      </div>

      <div id="cont-panel" class="panel" hidden>
        <div class="section-title">Contingent Labor Providers</div>
        <div class="hint" id="cont-msg"></div>
        <div class="row" style="margin-top:12px">
          <div>
            <label for="provider">Select staffing company</label>
            <input type="search" id="provider-search" placeholder="Type to filter companies…" aria-label="Filter companies" />
            <select id="provider" size="8" aria-label="Select staffing company" style="margin-top:8px"></select>
          </div>
          <div>
            <div class="contacts" id="provider-contact">Select a company to view HSE contact details.</div>
            <div class="copy"><button class="copy-btn" id="copy-btn" disabled>Copy contact details</button></div>
          </div>
        </div>
      </div>
    </div>

    <div class="footer">This page works offline after the first load. Add QR image paths in <code>contact-data.json</code> if available.</div>
  </main>

  <script>
    async function loadData() {
      try {
        const res = await fetch('contact-data.json');
        const data = await res.json();
        initUI(data);
      } catch (e) {
        console.error('Failed to load contact-data.json', e);
        const fallback = {
          messages: {
            contingent: 'Please notify your Honeywell Supervisor about your incident first. Then, select your staffing company to view contact details for reporting.',
            usSupervisor: 'Please report all work related injuries immediately to your supervisor.'
          },
          honeywellUS: { service: 'Care On Site', phone: '844-501-2273', note: 'Please report all work related injuries immediately to your supervisor.', qrImageUrl: '' },
          honeywellCanada: { service: 'Windley Ely Nurse Triage', phone: '877-424-5256', note: 'Please report all work related injuries immediately to your supervisor.', qrImageUrl: '' },
          contingentProviders: []
        };
        initUI(fallback);
      }
    }

    function initUI(data) {
      const category = document.getElementById('category');
      const panels = { us: 'us-panel', canada: 'ca-panel', contingent: 'cont-panel' };
      const showPanel = key => {
        Object.values(panels).forEach(id => document.getElementById(id).hidden = true);
        document.getElementById(panels[key]).hidden = false;
      };
      showPanel('us');
      category.addEventListener('change', e => showPanel(e.target.value));

      // US
      document.getElementById('us-phone').textContent = data.honeywellUS.phone || '';
      document.getElementById('us-note').textContent = data.honeywellUS.note || data.messages.usSupervisor || '';
      const usQr = document.getElementById('us-qr');
      usQr.innerHTML = data.honeywellUS.qrImageUrl ? `<img src="${data.honeywellUS.qrImageUrl}" alt="US QR" />` : '<span>No QR set</span>';

      // Canada
      document.getElementById('ca-phone').textContent = data.honeywellCanada.phone || '';
      document.getElementById('ca-note').textContent = data.honeywellCanada.note || data.messages.usSupervisor || '';
      const caQr = document.getElementById('ca-qr');
      caQr.innerHTML = data.honeywellCanada.qrImageUrl ? `<img src="${data.honeywellCanada.qrImageUrl}" alt="Canada QR" />` : '<span>No QR set</span>';

      // Contingent
      document.getElementById('cont-msg').textContent = data.messages.contingent || '';
      const select = document.getElementById('provider');
      const search = document.getElementById('provider-search');
      const contactBox = document.getElementById('provider-contact');
      const copyBtn = document.getElementById('copy-btn');

      const providers = (data.contingentProviders || []).slice();
      const renderOptions = list => {
        select.innerHTML = '';
        list.forEach(p => {
          const opt = document.createElement('option');
          opt.value = p.name;
          opt.textContent = p.name;
          select.appendChild(opt);
        });
      };
      renderOptions(providers);

      const updateContact = () => {
        const sel = select.value;
        const p = providers.find(x => x.name === sel);
        if (p) {
          contactBox.textContent = p.contact || 'No contact details available.';
          copyBtn.disabled = false;
        } else {
          contactBox.textContent = 'Select a company to view HSE contact details.';
          copyBtn.disabled = true;
        }
      };
      select.addEventListener('change', updateContact);

      search.addEventListener('input', () => {
        const q = search.value.toLowerCase();
        const filtered = providers.filter(p => p.name.toLowerCase().includes(q));
        renderOptions(filtered);
        updateContact();
      });

      copyBtn.addEventListener('click', async () => {
        try { await navigator.clipboard.writeText(contactBox.textContent); copyBtn.textContent = 'Copied!'; setTimeout(() => copyBtn.textContent = 'Copy contact details', 1500); } catch (e) {}
      });
    }

    loadData();
  </script>
</body>
</html>
